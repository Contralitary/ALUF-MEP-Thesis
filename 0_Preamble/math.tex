%% math.tex
%% Copyright 2024 Zhiyuan Qiu
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   https://www.latex-project.org/lppl.txt
% and version 1.3c or later is part of all distributions of LaTeX
% version 2008 or later.
%
% This work has the LPPL maintenance status `maintained'.
% 
% The Current Maintainer of this work is Zhiyuan Qiu.
%
% This work consists of all files listed in manifest.txt.


% For writing Math formulas
\usepackage{amsmath, amsthm, amssymb, amsfonts, mathrsfs}

% ========================= Assumption & Theorem =========================

% Customize Assumption & Theorem environment to allow for sub-numbering
% https://tex.stackexchange.com/a/43351
% https://tex.stackexchange.com/a/276286
% https://tex.stackexchange.com/a/220006 (1, 1.A, 1.B...)
% Use them like the `\begin{subequations}' command:
% `\begin{subtheorems}{theorem}', `\begin{subassumptions}{assumption}'

% Theorem
\newtheorem{theorem}{Theorem}
\newcounter{parentnumber}

\makeatletter 
\newenvironment{subtheorems}[1]{%
    \counterwithin*{theorem}{parentnumber}
    \def\subtheoremscounter{#1}%
    \refstepcounter{#1}%
    \protected@edef\theparentnumber{\csname the#1\endcsname}%
    \setcounter{parentnumber}{\value{#1}}%
    \setcounter{#1}{0}%
    \expandafter\def\csname the#1\endcsname{\theparentnumber.$\mathcal{\Alph{#1}}$}%
    \ignorespaces
}{%
    \setcounter{\subtheoremscounter}{\value{parentnumber}}%
    \counterwithout*{theorem}{parentnumber} % kick it from the reset list
    \ignorespacesafterend
}
\makeatother

% Assumption
\newtheorem{assumption}{Assumption}
\newcounter{parentnumbertwo}
\makeatletter 
\newenvironment{subassumptions}[1]{%
    \counterwithin*{assumption}{parentnumbertwo}
    \def\subassumptionscounter{#1}%
    \refstepcounter{#1}%
    \protected@edef\theparentnumbertwo{\csname the#1\endcsname}%
    \setcounter{parentnumbertwo}{\value{#1}}%
    \setcounter{#1}{0}%
    \expandafter\def\csname the#1\endcsname{\theparentnumbertwo.$\mathcal{\Alph{#1}}$}%
    \ignorespaces
}{%
    \setcounter{\subassumptionscounter}{\value{parentnumbertwo}}%
    \counterwithout*{assumption}{parentnumbertwo} % kick it from the reset list
    \ignorespacesafterend
}
\makeatother

% Hypothesis
\newtheorem{hypothesis}{Hypothesis}
\newcounter{parentnumberthree}
\makeatletter 
\newenvironment{subhypotheses}[1]{%
    \counterwithin*{hypothesis}{parentnumberthree}
    \def\subhypothesescounter{#1}%
    \refstepcounter{#1}%
    \protected@edef\theparentnumberthree{\csname the#1\endcsname}%
    \setcounter{parentnumberthree}{\value{#1}}%
    \setcounter{#1}{0}%
    \expandafter\def\csname the#1\endcsname{\theparentnumberthree.$\mathcal{\Alph{#1}}$}%
    \ignorespaces
}{%
    \setcounter{\subhypothesescounter}{\value{parentnumberthree}}%
    \counterwithout*{hypothesis}{parentnumberthree} % kick it from the reset list
    \ignorespacesafterend
}
\makeatother
